<!DOCTYPE html>
<html lang="tr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>787 Webhook</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --bg: #0b0d17;
            --surface: #131627;
            --surface2: #1a1d33;
            --surface3: #22264a;
            --text: #e2e8f0;
            --text2: #94a3b8;
            --text3: #64748b;
            --accent: #5865f2;
            --accent-hover: #4752c4;
            --green: #23a559;
            --red: #f23f43;
            --yellow: #f0b232;
            --border: rgba(255, 255, 255, 0.06);
            --r: 10px;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: var(--bg);
            color: var(--text);
            height: 100vh;
            overflow: hidden;
        }

        /* ‚îÄ‚îÄ‚îÄ LAYOUT ‚îÄ‚îÄ‚îÄ */
        .app {
            display: grid;
            grid-template-columns: 280px 1fr 320px;
            height: 100vh;
            gap: 0;
        }

        .panel {
            background: var(--surface);
            border-right: 1px solid var(--border);
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .panel:last-child {
            border-right: none;
            border-left: 1px solid var(--border);
        }

        .panel-header {
            padding: 18px 20px;
            border-bottom: 1px solid var(--border);
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: 700;
            font-size: 0.95rem;
            flex-shrink: 0;
        }

        .panel-header i {
            color: var(--accent);
        }

        .panel-body {
            flex: 1;
            overflow-y: auto;
            padding: 16px;
        }

        /* ‚îÄ‚îÄ‚îÄ SCROLLBAR ‚îÄ‚îÄ‚îÄ */
        ::-webkit-scrollbar {
            width: 4px;
        }

        ::-webkit-scrollbar-track {
            background: transparent;
        }

        ::-webkit-scrollbar-thumb {
            background: var(--surface3);
            border-radius: 2px;
        }

        /* ‚îÄ‚îÄ‚îÄ SECTION ‚îÄ‚îÄ‚îÄ */
        .section {
            margin-bottom: 20px;
        }

        .section-label {
            font-size: 0.7rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1.2px;
            color: var(--text3);
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        /* ‚îÄ‚îÄ‚îÄ INPUTS ‚îÄ‚îÄ‚îÄ */
        .field {
            margin-bottom: 12px;
        }

        .field label {
            display: block;
            font-size: 0.75rem;
            color: var(--text2);
            margin-bottom: 5px;
            font-weight: 500;
        }

        .field input,
        .field textarea,
        .field select {
            width: 100%;
            background: var(--bg);
            border: 1px solid var(--border);
            color: var(--text);
            padding: 9px 12px;
            border-radius: 6px;
            font-size: 0.82rem;
            font-family: inherit;
            outline: none;
            transition: border-color 0.15s;
        }

        .field input:focus,
        .field textarea:focus {
            border-color: var(--accent);
        }

        .field textarea {
            resize: vertical;
            min-height: 70px;
        }

        /* ‚îÄ‚îÄ‚îÄ BUTTONS ‚îÄ‚îÄ‚îÄ */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 7px;
            padding: 8px 16px;
            border: none;
            border-radius: 6px;
            font-size: 0.78rem;
            font-weight: 600;
            font-family: inherit;
            cursor: pointer;
            transition: opacity 0.15s;
            color: white;
        }

        .btn:hover {
            opacity: 0.85;
        }

        .btn-accent {
            background: var(--accent);
        }

        .btn-green {
            background: var(--green);
        }

        .btn-red {
            background: var(--red);
        }

        .btn-ghost {
            background: var(--surface2);
            color: var(--text2);
            border: 1px solid var(--border);
        }

        .btn-sm {
            padding: 6px 10px;
            font-size: 0.72rem;
        }

        .btn-full {
            width: 100%;
        }

        .btn-row {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }

        /* ‚îÄ‚îÄ‚îÄ WEBHOOK LIST ‚îÄ‚îÄ‚îÄ */
        .wh-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px 12px;
            background: var(--bg);
            border: 1px solid var(--border);
            border-radius: 8px;
            margin-bottom: 6px;
            cursor: pointer;
            transition: border-color 0.15s;
        }

        .wh-item:hover,
        .wh-item.active {
            border-color: var(--accent);
        }

        .wh-item.active {
            background: var(--surface2);
        }

        .wh-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: var(--text3);
            flex-shrink: 0;
        }

        .wh-item.active .wh-dot {
            background: var(--green);
        }

        .wh-info {
            flex: 1;
            min-width: 0;
        }

        .wh-name {
            font-size: 0.82rem;
            font-weight: 600;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .wh-url {
            font-size: 0.68rem;
            color: var(--text3);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .wh-del {
            color: var(--text3);
            cursor: pointer;
            font-size: 0.75rem;
            padding: 4px;
        }

        .wh-del:hover {
            color: var(--red);
        }

        /* ‚îÄ‚îÄ‚îÄ TABS ‚îÄ‚îÄ‚îÄ */
        .tabs {
            display: flex;
            border-bottom: 1px solid var(--border);
            flex-shrink: 0;
        }

        .tab-btn {
            flex: 1;
            padding: 12px 8px;
            text-align: center;
            font-size: 0.78rem;
            font-weight: 600;
            color: var(--text3);
            cursor: pointer;
            border-bottom: 2px solid transparent;
            transition: color 0.15s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
            background: none;
            border-top: none;
            border-left: none;
            border-right: none;
            font-family: inherit;
        }

        .tab-btn:hover {
            color: var(--text);
        }

        .tab-btn.active {
            color: var(--accent);
            border-bottom-color: var(--accent);
        }

        .tab-page {
            display: none;
        }

        .tab-page.active {
            display: block;
        }

        /* ‚îÄ‚îÄ‚îÄ CARDS ‚îÄ‚îÄ‚îÄ */
        .card {
            background: var(--surface2);
            border: 1px solid var(--border);
            border-radius: var(--r);
            padding: 16px;
            margin-bottom: 14px;
        }

        .card-title {
            font-size: 0.82rem;
            font-weight: 700;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .card-title i {
            color: var(--accent);
            font-size: 0.9rem;
        }

        /* ‚îÄ‚îÄ‚îÄ LINK / FILE ITEMS ‚îÄ‚îÄ‚îÄ */
        .list-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 8px 10px;
            background: var(--bg);
            border: 1px solid var(--border);
            border-radius: 6px;
            margin-bottom: 6px;
            font-size: 0.78rem;
        }

        .list-item .info {
            flex: 1;
            min-width: 0;
        }

        .list-item .title {
            font-weight: 600;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .list-item .sub {
            font-size: 0.7rem;
            color: var(--text3);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .list-item .badge {
            font-size: 0.65rem;
            padding: 2px 8px;
            border-radius: 4px;
            background: var(--accent);
            color: white;
            font-weight: 600;
            flex-shrink: 0;
        }

        /* ‚îÄ‚îÄ‚îÄ EMBED PREVIEW ‚îÄ‚îÄ‚îÄ */
        .embed-preview {
            background: var(--bg);
            border-left: 4px solid var(--accent);
            border-radius: 0 6px 6px 0;
            padding: 14px;
            margin-top: 10px;
        }

        .embed-preview .ep-title {
            font-weight: 700;
            font-size: 0.88rem;
            margin-bottom: 6px;
        }

        .embed-preview .ep-desc {
            font-size: 0.8rem;
            color: var(--text2);
            line-height: 1.5;
        }

        /* ‚îÄ‚îÄ‚îÄ TEMPLATE PILLS ‚îÄ‚îÄ‚îÄ */
        .pill {
            display: inline-flex;
            align-items: center;
            gap: 5px;
            padding: 4px 10px;
            background: var(--surface3);
            border-radius: 20px;
            font-size: 0.7rem;
            font-weight: 600;
            color: var(--text2);
            cursor: pointer;
            margin: 0 4px 4px 0;
            transition: background 0.15s;
        }

        .pill:hover {
            background: var(--accent);
            color: white;
        }

        .pill .pill-x {
            font-size: 0.6rem;
            opacity: 0.6;
        }

        .pill .pill-x:hover {
            opacity: 1;
            color: var(--red);
        }

        /* ‚îÄ‚îÄ‚îÄ MODE TOGGLE ‚îÄ‚îÄ‚îÄ */
        .mode-toggle {
            display: flex;
            background: var(--bg);
            border-radius: 6px;
            border: 1px solid var(--border);
            overflow: hidden;
            margin-bottom: 12px;
        }

        .mode-opt {
            flex: 1;
            text-align: center;
            padding: 7px;
            font-size: 0.72rem;
            font-weight: 600;
            color: var(--text3);
            cursor: pointer;
            transition: all 0.15s;
        }

        .mode-opt.active {
            background: var(--accent);
            color: white;
        }

        /* ‚îÄ‚îÄ‚îÄ DROPZONE ‚îÄ‚îÄ‚îÄ */
        .dropzone {
            border: 2px dashed var(--border);
            border-radius: var(--r);
            padding: 30px 20px;
            text-align: center;
            color: var(--text3);
            cursor: pointer;
            transition: border-color 0.15s;
            margin-bottom: 12px;
        }

        .dropzone:hover,
        .dropzone.dragover {
            border-color: var(--accent);
            color: var(--text2);
        }

        .dropzone i {
            font-size: 1.8rem;
            margin-bottom: 8px;
            display: block;
        }

        .dropzone p {
            font-size: 0.78rem;
        }

        /* ‚îÄ‚îÄ‚îÄ LOG ENTRIES ‚îÄ‚îÄ‚îÄ */
        .log-entry {
            padding: 8px 10px;
            border-radius: 6px;
            margin-bottom: 5px;
            font-size: 0.75rem;
            display: flex;
            gap: 8px;
            background: var(--bg);
            border-left: 3px solid var(--text3);
        }

        .log-entry.success {
            border-left-color: var(--green);
        }

        .log-entry.error {
            border-left-color: var(--red);
        }

        .log-entry.warning {
            border-left-color: var(--yellow);
        }

        .log-entry .log-time {
            color: var(--text3);
            font-size: 0.7rem;
            white-space: nowrap;
        }

        .log-entry .log-msg {
            flex: 1;
            color: var(--text2);
            word-break: break-word;
        }

        /* ‚îÄ‚îÄ‚îÄ EMPTY STATE ‚îÄ‚îÄ‚îÄ */
        .empty {
            text-align: center;
            padding: 30px 20px;
            color: var(--text3);
            font-size: 0.8rem;
        }

        .empty i {
            font-size: 1.5rem;
            margin-bottom: 8px;
            display: block;
            opacity: 0.4;
        }

        /* ‚îÄ‚îÄ‚îÄ NOTIFICATION ‚îÄ‚îÄ‚îÄ */
        .toast-container {
            position: fixed;
            top: 16px;
            right: 16px;
            z-index: 9999;
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .toast {
            background: var(--surface2);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 12px 16px;
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 0.8rem;
            color: var(--text);
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.4);
            animation: toastIn 0.2s ease;
            max-width: 360px;
        }

        .toast.hide {
            animation: toastOut 0.2s ease forwards;
        }

        .toast.success i {
            color: var(--green);
        }

        .toast.error i {
            color: var(--red);
        }

        .toast.warning i {
            color: var(--yellow);
        }

        .toast.info i {
            color: var(--accent);
        }

        @keyframes toastIn {
            from {
                opacity: 0;
                transform: translateX(20px);
            }

            to {
                opacity: 1;
                transform: none;
            }
        }

        @keyframes toastOut {
            from {
                opacity: 1;
            }

            to {
                opacity: 0;
                transform: translateX(20px);
            }
        }

        /* ‚îÄ‚îÄ‚îÄ TOGGLE SWITCH ‚îÄ‚îÄ‚îÄ */
        .switch {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.78rem;
            color: var(--text2);
        }

        .switch input {
            display: none;
        }

        .switch-track {
            width: 34px;
            height: 18px;
            background: var(--surface3);
            border-radius: 10px;
            position: relative;
            cursor: pointer;
            transition: background 0.15s;
        }

        .switch-track::after {
            content: '';
            width: 14px;
            height: 14px;
            background: white;
            border-radius: 50%;
            position: absolute;
            top: 2px;
            left: 2px;
            transition: transform 0.15s;
        }

        .switch input:checked+.switch-track {
            background: var(--accent);
        }

        .switch input:checked+.switch-track::after {
            transform: translateX(16px);
        }

        /* ‚îÄ‚îÄ‚îÄ PROGRESS ‚îÄ‚îÄ‚îÄ */
        .progress {
            width: 100%;
            height: 3px;
            background: var(--border);
            border-radius: 2px;
            margin-top: 4px;
        }

        .progress-fill {
            height: 100%;
            background: var(--accent);
            border-radius: 2px;
            transition: width 0.3s;
        }

        /* ‚îÄ‚îÄ‚îÄ FOOTER ‚îÄ‚îÄ‚îÄ */
        .footer {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            text-align: center;
            padding: 6px 0;
            font-size: 0.68rem;
            color: var(--text3);
            background: var(--surface);
            border-top: 1px solid var(--border);
            z-index: 100;
            letter-spacing: 0.3px;
        }

        /* ‚îÄ‚îÄ‚îÄ RESPONSIVE ‚îÄ‚îÄ‚îÄ */
        @media (max-width: 1024px) {
            .app {
                grid-template-columns: 1fr;
            }

            .panel {
                border: none;
                border-bottom: 1px solid var(--border);
            }

            body {
                overflow: auto;
            }

            .app {
                height: auto;
            }
        }
    </style>
</head>

<body>

    <div class="app">
        <!-- ‚ïê‚ïê‚ïê SIDEBAR ‚ïê‚ïê‚ïê -->
        <div class="panel">
            <div class="panel-header">
                <i class="fas fa-paper-plane"></i>
                787 Webhook
            </div>
            <div class="panel-body">
                <!-- Identity -->
                <div class="section">
                    <div class="section-label"><i class="fas fa-user-circle"></i> Kimlik</div>
                    <div class="field">
                        <label>G√∂nderici Adƒ±</label>
                        <input type="text" id="identityName" placeholder="787 Bot">
                    </div>
                    <div class="field">
                        <label>Avatar URL</label>
                        <input type="text" id="identityAvatar" placeholder="https://...">
                    </div>
                </div>

                <!-- Webhook Management -->
                <div class="section">
                    <div class="section-label"><i class="fas fa-plug"></i> Webhook</div>
                    <div class="field">
                        <label>Webhook URL</label>
                        <input type="text" id="webhookUrl" placeholder="https://discord.com/api/webhooks/...">
                    </div>
                    <div class="field">
                        <label>ƒ∞sim (Opsiyonel)</label>
                        <input type="text" id="webhookName" placeholder="Sunucu #1">
                    </div>
                    <button class="btn btn-accent btn-full" id="addWebhookBtn">
                        <i class="fas fa-plus"></i> Ekle
                    </button>
                </div>

                <!-- Webhook List -->
                <div class="section">
                    <div class="section-label"><i class="fas fa-list"></i> Kayƒ±tlƒ±</div>
                    <div id="webhookList"></div>
                </div>

                <!-- Proxy -->
                <div class="section">
                    <label class="switch">
                        <input type="checkbox" id="proxyToggle">
                        <span class="switch-track"></span>
                        Proxy Kullan
                    </label>
                    <div id="proxyBox" style="display:none; margin-top:10px;">
                        <div class="field">
                            <label>Proxy URL</label>
                            <input type="text" id="proxyUrl" placeholder="http://proxy:8080">
                        </div>
                    </div>
                </div>

                <!-- Sidebar Actions -->
                <div class="btn-row">
                    <button class="btn btn-ghost btn-sm" id="testBtn"><i class="fas fa-vial"></i> Test</button>
                    <button class="btn btn-ghost btn-sm" id="healthBtn"><i class="fas fa-heartbeat"></i> Saƒülƒ±k</button>
                    <button class="btn btn-ghost btn-sm" id="resetBtn"><i class="fas fa-trash-alt"></i> Sƒ±fƒ±rla</button>
                </div>
            </div>
        </div>

        <!-- ‚ïê‚ïê‚ïê MAIN CONTENT ‚ïê‚ïê‚ïê -->
        <div class="panel" style="background: var(--bg);">
            <div class="tabs">
                <button class="tab-btn active" data-tab="links"><i class="fas fa-link"></i> Link</button>
                <button class="tab-btn" data-tab="embed"><i class="fas fa-code"></i> Embed</button>
                <button class="tab-btn" data-tab="files"><i class="fas fa-file-upload"></i> Dosya</button>
                <button class="tab-btn" data-tab="history"><i class="fas fa-clock-rotate-left"></i> Ge√ßmi≈ü</button>
            </div>
            <div class="panel-body">

                <!-- ‚îÄ‚îÄ‚îÄ LINKS TAB ‚îÄ‚îÄ‚îÄ -->
                <div class="tab-page active" id="linksTab">
                    <div class="card">
                        <div class="card-title"><i class="fas fa-plus-circle"></i> Yeni Link</div>
                        <div class="field">
                            <label>URL</label>
                            <input type="text" id="linkUrl" placeholder="https://example.com/...">
                        </div>
                        <button class="btn btn-accent" id="addLinkBtn"><i class="fas fa-plus"></i> Ekle</button>
                    </div>

                    <div class="card">
                        <div class="card-title">
                            <i class="fas fa-list"></i> Link Listesi
                            <span style="margin-left:auto; font-size:0.7rem; color:var(--text3);"
                                id="linkCount">0</span>
                        </div>
                        <div class="mode-toggle">
                            <div class="mode-opt active" data-mode="single">Tekli</div>
                            <div class="mode-opt" data-mode="batch">Toplu</div>
                        </div>
                        <div class="field">
                            <label>Gecikme (ms)</label>
                            <input type="number" id="linkDelay" value="1000" min="200" step="100">
                        </div>
                        <div id="linkList"></div>
                        <div class="btn-row" style="margin-top:12px;">
                            <button class="btn btn-green" id="sendLinksBtn"><i class="fas fa-paper-plane"></i>
                                G√∂nder</button>
                            <button class="btn btn-red" id="clearLinksBtn"><i class="fas fa-trash"></i> Temizle</button>
                        </div>
                    </div>
                </div>

                <!-- ‚îÄ‚îÄ‚îÄ EMBED TAB ‚îÄ‚îÄ‚îÄ -->
                <div class="tab-page" id="embedTab">
                    <div class="card">
                        <div class="card-title"><i class="fas fa-bookmark"></i> ≈ûablonlar</div>
                        <div style="display:flex; gap:8px; margin-bottom:8px;">
                            <input type="text" id="templateName" placeholder="≈ûablon adƒ±..."
                                style="flex:1; background:var(--bg); border:1px solid var(--border); color:var(--text); padding:7px 10px; border-radius:6px; font-size:0.78rem; font-family:inherit; outline:none;">
                            <button class="btn btn-ghost btn-sm" id="saveTemplateBtn"><i
                                    class="fas fa-save"></i></button>
                        </div>
                        <div id="templateList"></div>
                    </div>

                    <div class="card">
                        <div class="card-title"><i class="fas fa-magic"></i> Embed Olu≈üturucu</div>
                        <div class="field">
                            <label>Ba≈ülƒ±k</label>
                            <input type="text" id="embedTitle" placeholder="Embed ba≈ülƒ±ƒüƒ±...">
                        </div>
                        <div class="field">
                            <label>A√ßƒ±klama</label>
                            <textarea id="embedDesc" rows="3"
                                placeholder="A√ßƒ±klama... {time}, {date} gibi deƒüi≈ükenler kullanabilirsiniz."></textarea>
                        </div>
                        <div class="field">
                            <label>Renk</label>
                            <input type="color" id="embedColor" value="#5865f2"
                                style="height:36px; padding:2px; cursor:pointer;">
                        </div>

                        <div class="section-label" style="margin-top:14px;"><i class="fas fa-eye"></i> √ñnizleme</div>
                        <div class="embed-preview" id="embedPreview">
                            <div class="ep-title" id="previewTitle">Ba≈ülƒ±k</div>
                            <div class="ep-desc" id="previewDesc">A√ßƒ±klama burada g√∂r√ºnecek...</div>
                        </div>

                        <div class="btn-row" style="margin-top:14px;">
                            <button class="btn btn-accent" id="sendEmbedBtn"><i class="fas fa-paper-plane"></i> Embed
                                G√∂nder</button>
                        </div>
                    </div>
                </div>

                <!-- ‚îÄ‚îÄ‚îÄ FILES TAB ‚îÄ‚îÄ‚îÄ -->
                <div class="tab-page" id="filesTab">
                    <div class="card">
                        <div class="card-title"><i class="fas fa-cloud-upload-alt"></i> Dosya Y√ºkle</div>
                        <div class="dropzone" id="dropzone">
                            <i class="fas fa-cloud-upload-alt"></i>
                            <p>S√ºr√ºkle & Bƒ±rak veya tƒ±kla (maks 25MB)</p>
                        </div>
                        <input type="file" id="fileInput" multiple hidden>

                        <div class="mode-toggle">
                            <div class="mode-opt active" data-mode="single">Tekli</div>
                            <div class="mode-opt" data-mode="batch">Toplu</div>
                        </div>
                        <div class="field">
                            <label>Gecikme (ms)</label>
                            <input type="number" id="fileDelay" value="2000" min="500" step="500">
                        </div>
                        <div id="fileList"></div>
                        <div class="btn-row" style="margin-top:12px;">
                            <button class="btn btn-green" id="sendFilesBtn"><i class="fas fa-paper-plane"></i>
                                G√∂nder</button>
                            <button class="btn btn-red" id="clearFilesBtn"><i class="fas fa-trash"></i> Temizle</button>
                        </div>
                    </div>
                </div>

                <!-- ‚îÄ‚îÄ‚îÄ HISTORY TAB ‚îÄ‚îÄ‚îÄ -->
                <div class="tab-page" id="historyTab">
                    <div class="card">
                        <div class="card-title"><i class="fas fa-clock-rotate-left"></i> G√∂nderim Ge√ßmi≈üi</div>
                        <div id="historyList"></div>
                    </div>
                </div>

            </div>
        </div>

        <!-- ‚ïê‚ïê‚ïê LOG PANEL ‚ïê‚ïê‚ïê -->
        <div class="panel">
            <div class="panel-header">
                <i class="fas fa-terminal"></i>
                Loglar
                <span style="margin-left:auto; display:flex; gap:6px;">
                    <button class="btn btn-ghost btn-sm" id="downloadLogsBtn" title="ƒ∞ndir"><i
                            class="fas fa-download"></i></button>
                    <button class="btn btn-ghost btn-sm" id="clearLogsBtn" title="Temizle"><i
                            class="fas fa-trash"></i></button>
                </span>
            </div>
            <div class="panel-body" id="logList"></div>
        </div>
    </div>

    <!-- Footer -->
    <div class="footer">Created by <strong>Zywexx</strong> ‚Ä¢ Powered by <strong>787</strong></div>

    <!-- Toast Container -->
    <div class="toast-container" id="toastContainer"></div>

    <script>
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        // STATE
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        const state = {
            webhooks: JSON.parse(localStorage.getItem('wh_webhooks')) || [],
            activeWebhook: null,
            links: JSON.parse(localStorage.getItem('wh_links')) || [],
            files: [],
            logs: JSON.parse(localStorage.getItem('wh_logs')) || [],
            history: JSON.parse(localStorage.getItem('wh_history')) || [],
            identity: JSON.parse(localStorage.getItem('wh_identity')) || { name: '', avatar: '' },
            templates: JSON.parse(localStorage.getItem('wh_templates')) || [],
            proxyEnabled: false,
            sendMode: 'single'
        };

        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        // DOM
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        const $ = id => document.getElementById(id);
        const dom = {
            identityName: $('identityName'),
            identityAvatar: $('identityAvatar'),
            webhookUrl: $('webhookUrl'),
            webhookName: $('webhookName'),
            addWebhookBtn: $('addWebhookBtn'),
            webhookList: $('webhookList'),
            proxyToggle: $('proxyToggle'),
            proxyBox: $('proxyBox'),
            proxyUrl: $('proxyUrl'),
            testBtn: $('testBtn'),
            healthBtn: $('healthBtn'),
            resetBtn: $('resetBtn'),
            linkUrl: $('linkUrl'),
            addLinkBtn: $('addLinkBtn'),
            linkCount: $('linkCount'),
            linkDelay: $('linkDelay'),
            linkList: $('linkList'),
            sendLinksBtn: $('sendLinksBtn'),
            clearLinksBtn: $('clearLinksBtn'),
            embedTitle: $('embedTitle'),
            embedDesc: $('embedDesc'),
            embedColor: $('embedColor'),
            embedPreview: $('embedPreview'),
            previewTitle: $('previewTitle'),
            previewDesc: $('previewDesc'),
            sendEmbedBtn: $('sendEmbedBtn'),
            templateName: $('templateName'),
            saveTemplateBtn: $('saveTemplateBtn'),
            templateList: $('templateList'),
            dropzone: $('dropzone'),
            fileInput: $('fileInput'),
            fileDelay: $('fileDelay'),
            fileList: $('fileList'),
            sendFilesBtn: $('sendFilesBtn'),
            clearFilesBtn: $('clearFilesBtn'),
            historyList: $('historyList'),
            logList: $('logList'),
            downloadLogsBtn: $('downloadLogsBtn'),
            clearLogsBtn: $('clearLogsBtn'),
            toastContainer: $('toastContainer'),
            tabs: document.querySelectorAll('.tab-btn'),
            tabPages: document.querySelectorAll('.tab-page'),
            modeOpts: document.querySelectorAll('.mode-opt')
        };

        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        // HELPERS
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        const helpers = {
            save() {
                localStorage.setItem('wh_webhooks', JSON.stringify(state.webhooks));
                localStorage.setItem('wh_links', JSON.stringify(state.links));
                localStorage.setItem('wh_history', JSON.stringify(state.history));
                localStorage.setItem('wh_identity', JSON.stringify(state.identity));
                localStorage.setItem('wh_templates', JSON.stringify(state.templates));
            },
            saveLogs() {
                localStorage.setItem('wh_logs', JSON.stringify(state.logs));
            },
            toast(msg, type = 'info') {
                const el = document.createElement('div');
                el.className = `toast ${type}`;
                const icons = { success: 'fa-check-circle', error: 'fa-times-circle', warning: 'fa-exclamation-triangle', info: 'fa-info-circle' };
                el.innerHTML = `<i class="fas ${icons[type] || icons.info}"></i><span>${msg}</span>`;
                dom.toastContainer.appendChild(el);
                setTimeout(() => { el.classList.add('hide'); setTimeout(() => el.remove(), 250); }, 4000);
            },
            log(msg, type = 'info') {
                const entry = { id: Date.now(), time: new Date().toLocaleTimeString(), message: msg, type };
                state.logs.unshift(entry);
                if (state.logs.length > 100) state.logs.pop();
                this.saveLogs();
                this.renderLogs();
            },
            renderLogs() {
                if (!state.logs.length) {
                    dom.logList.innerHTML = '<div class="empty"><i class="fas fa-terminal"></i><p>Log yok</p></div>';
                    return;
                }
                dom.logList.innerHTML = state.logs.map(l =>
                    `<div class="log-entry ${l.type}"><span class="log-time">${l.time}</span><span class="log-msg">${l.message}</span></div>`
                ).join('');
            },
            vars(text) {
                if (!text) return '';
                const now = new Date();
                return text
                    .replaceAll('{time}', now.toLocaleTimeString())
                    .replaceAll('{date}', now.toLocaleDateString())
                    .replaceAll('{datetime}', now.toLocaleString())
                    .replaceAll('{webhook_name}', state.activeWebhook?.name || 'Webhook')
                    .replaceAll('{user}', state.identity.name || '787 User');
            },
            linkType(url) {
                if (/(youtube\.com|youtu\.be)/.test(url)) return 'YouTube';
                if (/\.(jpg|jpeg|png|gif|webp)(\?.*)?$/i.test(url)) return 'Resim';
                if (/\.(mp4|webm|mov)(\?.*)?$/i.test(url)) return 'Video';
                if (/\.(mp3|wav|ogg)(\?.*)?$/i.test(url)) return 'Ses';
                if (/\.pdf(\?.*)?$/i.test(url)) return 'PDF';
                return 'Link';
            },
            fileSize(bytes) {
                if (!bytes) return '0 B';
                const k = 1024, s = ['B', 'KB', 'MB', 'GB'];
                const i = Math.floor(Math.log(bytes) / Math.log(k));
                return (bytes / Math.pow(k, i)).toFixed(1) + ' ' + s[i];
            },
            fileIcon(name) {
                const ext = name.split('.').pop().toLowerCase();
                const map = {
                    jpg: 'fa-file-image', jpeg: 'fa-file-image', png: 'fa-file-image', gif: 'fa-file-image', webp: 'fa-file-image',
                    mp4: 'fa-file-video', webm: 'fa-file-video', mov: 'fa-file-video',
                    mp3: 'fa-file-audio', wav: 'fa-file-audio', ogg: 'fa-file-audio',
                    pdf: 'fa-file-pdf', zip: 'fa-file-archive', rar: 'fa-file-archive',
                    txt: 'fa-file-alt', doc: 'fa-file-word', docx: 'fa-file-word'
                };
                return map[ext] || 'fa-file';
            },
            getSenderName() { return state.identity.name || '787'; },
            getSenderAvatar() { return state.identity.avatar || 'https://cdn.discordapp.com/attachments/1308901267845677237/1457076691112296520/787_duz.png?ex=699dec6a&is=699c9aea&hm=a2f563baa89848df6fda49e5380ea4a8fc3b6bd6c827ddbb127d903f7f75b449&'; }
        };

        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        // WEBHOOK MANAGER
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        const webhookManager = {
            add() {
                const url = dom.webhookUrl.value.trim();
                const name = dom.webhookName.value.trim() || 'Webhook';
                if (!url) return helpers.toast('URL bo≈ü', 'error');
                if (!url.includes('discord.com/api/webhooks/')) helpers.toast('Discord webhook URL\'si deƒüil', 'warning');
                const wh = { id: Date.now(), name, url, date: new Date().toLocaleString() };
                state.webhooks.push(wh);
                state.activeWebhook = wh;
                helpers.save(); this.render();
                dom.webhookUrl.value = ''; dom.webhookName.value = '';
                helpers.toast(`"${name}" eklendi`, 'success');
                helpers.log(`"${name}" webhook eklendi`, 'success');
            },
            delete(id) {
                state.webhooks = state.webhooks.filter(w => w.id !== id);
                if (state.activeWebhook?.id === id) state.activeWebhook = state.webhooks[0] || null;
                helpers.save(); this.render();
                helpers.toast('Webhook silindi', 'info');
                helpers.log('Webhook silindi', 'info');
            },
            render() {
                if (!state.webhooks.length) {
                    dom.webhookList.innerHTML = '<div class="empty"><i class="fas fa-plug"></i><p>Webhook yok</p></div>';
                    return;
                }
                dom.webhookList.innerHTML = '';
                state.webhooks.forEach(wh => {
                    const el = document.createElement('div');
                    el.className = `wh-item ${state.activeWebhook?.id === wh.id ? 'active' : ''}`;
                    el.innerHTML = `<div class="wh-dot"></div><div class="wh-info"><div class="wh-name">${wh.name}</div><div class="wh-url">${wh.url}</div></div><div class="wh-del" data-id="${wh.id}"><i class="fas fa-trash-alt"></i></div>`;
                    el.addEventListener('click', e => {
                        if (e.target.closest('.wh-del')) { this.delete(wh.id); return; }
                        state.activeWebhook = wh; this.render();
                        helpers.toast(`"${wh.name}" aktif`, 'info');
                    });
                    dom.webhookList.appendChild(el);
                });
            },
            async send(data) {
                if (!state.activeWebhook) throw new Error('Aktif webhook yok');
                const url = state.activeWebhook.url;
                const opts = { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(data) };
                if (state.proxyEnabled && dom.proxyUrl.value.trim()) {
                    opts.headers['X-Target-URL'] = url;
                    return fetch(dom.proxyUrl.value.trim(), opts);
                }
                return fetch(url, opts);
            },
            async test() {
                if (!state.activeWebhook) return helpers.toast('Webhook se√ßin', 'error');
                try {
                    const r = await this.send({ content: '‚úÖ **787** Test Ba≈üarƒ±lƒ±!', username: helpers.getSenderName(), avatar_url: helpers.getSenderAvatar() });
                    if (r.ok) { helpers.toast('Test ba≈üarƒ±lƒ±', 'success'); helpers.log('Webhook testi ba≈üarƒ±lƒ±', 'success'); }
                    else throw new Error(`HTTP ${r.status}`);
                } catch (e) { helpers.toast(`Test ba≈üarƒ±sƒ±z: ${e.message}`, 'error'); helpers.log(`Test ba≈üarƒ±sƒ±z: ${e.message}`, 'error'); }
            },
            async health() {
                if (!state.activeWebhook) return helpers.toast('Webhook se√ßin', 'error');
                try {
                    const r = await fetch(state.activeWebhook.url);
                    if (r.ok) { helpers.toast(`"${state.activeWebhook.name}" saƒülƒ±klƒ±`, 'success'); helpers.log('Saƒülƒ±k: OK', 'success'); }
                    else throw new Error(`HTTP ${r.status}`);
                } catch (e) { helpers.toast(`√áevrimdƒ±≈üƒ±: ${e.message}`, 'error'); helpers.log(`Saƒülƒ±k: FAIL - ${e.message}`, 'error'); }
            },
            reset() {
                if (!confirm('T√ºm veriler silinecek. Emin misiniz?')) return;
                localStorage.clear();
                state.webhooks = []; state.activeWebhook = null;
                state.links = []; state.history = []; state.logs = []; state.templates = [];
                state.identity = { name: '', avatar: '' };
                dom.identityName.value = ''; dom.identityAvatar.value = '';
                this.render(); linkManager.render(); fileManager.render(); helpers.renderLogs(); historyManager.render(); embedManager.renderTemplates();
                helpers.toast('T√ºm veriler silindi', 'info');
            }
        };

        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        // EMBED MANAGER
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        const embedManager = {
            updatePreview() {
                const t = helpers.vars(dom.embedTitle.value) || 'Ba≈ülƒ±k';
                const d = helpers.vars(dom.embedDesc.value) || 'A√ßƒ±klama burada g√∂r√ºnecek...';
                dom.previewTitle.textContent = t;
                dom.previewDesc.textContent = d;
                dom.embedPreview.style.borderLeftColor = dom.embedColor.value;
            },
            async sendEmbed() {
                if (!state.activeWebhook) return helpers.toast('Webhook se√ßin', 'error');
                const title = helpers.vars(dom.embedTitle.value);
                const desc = helpers.vars(dom.embedDesc.value);
                const color = parseInt(dom.embedColor.value.replace('#', ''), 16);
                if (!title && !desc) return helpers.toast('Ba≈ülƒ±k veya a√ßƒ±klama girin', 'warning');
                try {
                    const r = await webhookManager.send({
                        username: helpers.getSenderName(),
                        avatar_url: helpers.getSenderAvatar(),
                        embeds: [{ title, description: desc, color, timestamp: new Date().toISOString() }]
                    });
                    if (r.ok) { helpers.toast('Embed g√∂nderildi', 'success'); helpers.log('Embed g√∂nderildi', 'success'); historyManager.add('embed', 1); }
                    else throw new Error(`HTTP ${r.status}`);
                } catch (e) { helpers.toast(`Embed hatasƒ±: ${e.message}`, 'error'); helpers.log(`Embed hatasƒ±: ${e.message}`, 'error'); }
            },
            saveTemplate() {
                const name = dom.templateName.value.trim();
                if (!name) return helpers.toast('≈ûablon adƒ± girin', 'warning');
                state.templates.push({ id: Date.now(), name, title: dom.embedTitle.value, description: dom.embedDesc.value, color: dom.embedColor.value });
                helpers.save(); this.renderTemplates();
                dom.templateName.value = '';
                helpers.toast(`"${name}" kaydedildi`, 'success');
            },
            loadTemplate(t) {
                dom.embedTitle.value = t.title;
                dom.embedDesc.value = t.description;
                dom.embedColor.value = t.color;
                this.updatePreview();
                helpers.toast(`"${t.name}" y√ºklendi`, 'info');
            },
            deleteTemplate(id) {
                state.templates = state.templates.filter(t => t.id !== id);
                helpers.save(); this.renderTemplates();
            },
            renderTemplates() {
                if (!state.templates.length) { dom.templateList.innerHTML = '<span style="font-size:0.72rem; color:var(--text3);">Hen√ºz ≈üablon yok</span>'; return; }
                dom.templateList.innerHTML = '';
                state.templates.forEach(t => {
                    const pill = document.createElement('span');
                    pill.className = 'pill';
                    pill.innerHTML = `${t.name} <span class="pill-x"><i class="fas fa-times"></i></span>`;
                    pill.addEventListener('click', e => {
                        if (e.target.closest('.pill-x')) { this.deleteTemplate(t.id); return; }
                        this.loadTemplate(t);
                    });
                    dom.templateList.appendChild(pill);
                });
            }
        };

        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        // LINK MANAGER
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        const linkManager = {
            add() {
                const url = dom.linkUrl.value.trim();
                if (!url) return helpers.toast('URL bo≈ü', 'error');
                try { new URL(url); } catch { return helpers.toast('Ge√ßersiz URL', 'error'); }
                const type = helpers.linkType(url);
                state.links.push({ id: Date.now(), url, type, title: url.split('/').pop() || 'Link' });
                helpers.save(); this.render();
                dom.linkUrl.value = '';
                helpers.toast(`${type} eklendi`, 'success');
                helpers.log(`Link eklendi: ${url}`, 'info');
            },
            delete(id) {
                state.links = state.links.filter(l => l.id !== id);
                helpers.save(); this.render();
            },
            render() {
                dom.linkCount.textContent = state.links.length;
                if (!state.links.length) { dom.linkList.innerHTML = '<div class="empty"><i class="fas fa-link"></i><p>Link yok</p></div>'; return; }
                dom.linkList.innerHTML = '';
                state.links.forEach(link => {
                    const el = document.createElement('div');
                    el.className = 'list-item';
                    el.innerHTML = `<i class="fas fa-link" style="color:var(--accent);"></i><div class="info"><div class="title">${link.title}</div><div class="sub">${link.url}</div></div><span class="badge">${link.type}</span><div class="wh-del" style="cursor:pointer;"><i class="fas fa-trash-alt"></i></div>`;
                    el.querySelector('.wh-del').addEventListener('click', () => this.delete(link.id));
                    dom.linkList.appendChild(el);
                });
            },
            async send() {
                if (!state.activeWebhook) return helpers.toast('Webhook se√ßin', 'error');
                if (!state.links.length) return helpers.toast('Link yok', 'warning');
                const delay = parseInt(dom.linkDelay.value) || 1000;
                if (state.sendMode === 'single') {
                    for (const link of state.links) {
                        try {
                            const r = await webhookManager.send({ content: `üîó ${link.url}`, username: helpers.getSenderName(), avatar_url: helpers.getSenderAvatar() });
                            if (r.ok) helpers.log(`"${link.title}" g√∂nderildi`, 'success');
                            else throw new Error(`HTTP ${r.status}`);
                        } catch (e) { helpers.log(`"${link.title}" hata: ${e.message}`, 'error'); }
                        await new Promise(r => setTimeout(r, delay));
                    }
                } else {
                    const text = state.links.map(l => `‚Ä¢ ${l.url}`).join('\n');
                    try {
                        const r = await webhookManager.send({ content: `üìé **${state.links.length} link:**\n${text}`, username: helpers.getSenderName(), avatar_url: helpers.getSenderAvatar() });
                        if (r.ok) helpers.log(`${state.links.length} link toplu g√∂nderildi`, 'success');
                        else throw new Error(`HTTP ${r.status}`);
                    } catch (e) { helpers.log(`Toplu g√∂nderim hatasƒ±: ${e.message}`, 'error'); }
                }
                historyManager.add('links', state.links.length);
                helpers.log(`‚úÖ T√ºm linkler d√º≈üt√º! (${state.links.length} adet)`, 'success');
                helpers.toast(`T√ºm linkler d√º≈üt√º! (${state.links.length} adet)`, 'success');
            },
            clear() {
                if (!state.links.length) return;
                if (!confirm(`${state.links.length} link silinecek?`)) return;
                state.links = []; helpers.save(); this.render();
                helpers.toast('Linkler temizlendi', 'info');
            }
        };

        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        // FILE MANAGER
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        const fileManager = {
            add(fileList) {
                const max = 25 * 1024 * 1024;
                for (const file of fileList) {
                    if (file.size > max) { helpers.toast(`${file.name} √ßok b√ºy√ºk`, 'error'); continue; }
                    state.files.push({ id: Date.now() + Math.random(), file, name: file.name, size: file.size, progress: 0, status: 'pending' });
                }
                this.render();
                helpers.toast(`${fileList.length} dosya eklendi`, 'success');
            },
            remove(id) {
                state.files = state.files.filter(f => f.id !== id);
                this.render();
            },
            render() {
                if (!state.files.length) { dom.fileList.innerHTML = '<div class="empty"><i class="fas fa-file-upload"></i><p>Dosya yok</p></div>'; return; }
                dom.fileList.innerHTML = '';
                state.files.forEach(f => {
                    const el = document.createElement('div');
                    el.className = 'list-item';
                    el.innerHTML = `<i class="fas ${helpers.fileIcon(f.name)}" style="color:var(--accent);"></i><div class="info"><div class="title">${f.name}</div><div class="sub">${helpers.fileSize(f.size)}</div><div class="progress"><div class="progress-fill" style="width:${f.progress}%"></div></div></div><div class="wh-del" style="cursor:pointer;"><i class="fas fa-trash-alt"></i></div>`;
                    el.querySelector('.wh-del').addEventListener('click', () => this.remove(f.id));
                    dom.fileList.appendChild(el);
                });
            },
            async send() {
                if (!state.activeWebhook) return helpers.toast('Webhook se√ßin', 'error');
                if (!state.files.length) return helpers.toast('Dosya yok', 'warning');
                const delay = parseInt(dom.fileDelay.value) || 2000;
                for (const f of state.files) {
                    const form = new FormData();
                    form.append('file', f.file);
                    form.append('username', helpers.getSenderName());
                    form.append('avatar_url', helpers.getSenderAvatar());
                    try {
                        let url = state.activeWebhook.url;
                        if (state.proxyEnabled && dom.proxyUrl.value.trim()) {
                            form.append('target_url', url);
                            url = dom.proxyUrl.value.trim();
                        }
                        const r = await fetch(url, { method: 'POST', body: form });
                        if (r.ok) { f.progress = 100; f.status = 'sent'; this.render(); helpers.log(`"${f.name}" g√∂nderildi`, 'success'); }
                        else throw new Error(`HTTP ${r.status}`);
                    } catch (e) { f.status = 'error'; this.render(); helpers.log(`"${f.name}" hata: ${e.message}`, 'error'); }
                    await new Promise(r => setTimeout(r, delay));
                }
                historyManager.add('files', state.files.length);
                helpers.toast(`${state.files.length} dosya g√∂nderildi`, 'success');
            },
            clear() {
                if (!state.files.length) return;
                if (!confirm(`${state.files.length} dosya kaldƒ±rƒ±lacak?`)) return;
                state.files = []; this.render();
                helpers.toast('Dosyalar temizlendi', 'info');
            }
        };

        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        // HISTORY MANAGER
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        const historyManager = {
            add(type, count) {
                state.history.unshift({ id: Date.now(), type, count, date: new Date().toLocaleString(), webhook: state.activeWebhook?.name || '?' });
                if (state.history.length > 50) state.history.pop();
                helpers.save(); this.render();
            },
            render() {
                if (!state.history.length) { dom.historyList.innerHTML = '<div class="empty"><i class="fas fa-clock-rotate-left"></i><p>Ge√ßmi≈ü yok</p></div>'; return; }
                dom.historyList.innerHTML = state.history.map(h =>
                    `<div class="log-entry success"><span class="log-time">${h.date}</span><span class="log-msg"><strong>${h.webhook}</strong> ‚Üí ${h.count} ${h.type}</span></div>`
                ).join('');
            }
        };

        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        // LOG MANAGER
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        const logManager = {
            download() {
                if (!state.logs.length) return helpers.toast('Log yok', 'warning');
                const text = state.logs.map(l => `[${l.time}] [${l.type}] ${l.message}`).join('\n');
                const blob = new Blob([text], { type: 'text/plain' });
                const a = document.createElement('a');
                a.href = URL.createObjectURL(blob);
                a.download = `logs-${new Date().toISOString().slice(0, 10)}.txt`;
                a.click(); URL.revokeObjectURL(a.href);
                helpers.toast('Loglar indirildi', 'success');
            },
            clear() {
                if (!state.logs.length) return;
                if (!confirm('Loglar silinecek?')) return;
                state.logs = []; helpers.saveLogs(); helpers.renderLogs();
                helpers.toast('Loglar temizlendi', 'info');
            }
        };

        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        // EVENT LISTENERS
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        function init() {
            // Identity
            dom.identityName.value = state.identity.name;
            dom.identityAvatar.value = state.identity.avatar;
            dom.identityName.addEventListener('input', e => { state.identity.name = e.target.value; helpers.save(); });
            dom.identityAvatar.addEventListener('input', e => { state.identity.avatar = e.target.value; helpers.save(); });

            // Proxy
            dom.proxyToggle.addEventListener('change', function () { state.proxyEnabled = this.checked; dom.proxyBox.style.display = this.checked ? 'block' : 'none'; });

            // Webhook
            dom.addWebhookBtn.addEventListener('click', () => webhookManager.add());
            dom.webhookUrl.addEventListener('keydown', e => { if (e.key === 'Enter') webhookManager.add(); });
            dom.testBtn.addEventListener('click', () => webhookManager.test());
            dom.healthBtn.addEventListener('click', () => webhookManager.health());
            dom.resetBtn.addEventListener('click', () => webhookManager.reset());

            // Links
            dom.addLinkBtn.addEventListener('click', () => linkManager.add());
            dom.linkUrl.addEventListener('keydown', e => { if (e.key === 'Enter') linkManager.add(); });
            dom.sendLinksBtn.addEventListener('click', () => linkManager.send());
            dom.clearLinksBtn.addEventListener('click', () => linkManager.clear());

            // Embed
            dom.embedTitle.addEventListener('input', () => embedManager.updatePreview());
            dom.embedDesc.addEventListener('input', () => embedManager.updatePreview());
            dom.embedColor.addEventListener('input', () => embedManager.updatePreview());
            dom.sendEmbedBtn.addEventListener('click', () => embedManager.sendEmbed());
            dom.saveTemplateBtn.addEventListener('click', () => embedManager.saveTemplate());

            // Files
            dom.dropzone.addEventListener('click', () => dom.fileInput.click());
            dom.dropzone.addEventListener('dragover', e => { e.preventDefault(); dom.dropzone.classList.add('dragover'); });
            dom.dropzone.addEventListener('dragleave', () => dom.dropzone.classList.remove('dragover'));
            dom.dropzone.addEventListener('drop', e => { e.preventDefault(); dom.dropzone.classList.remove('dragover'); fileManager.add(e.dataTransfer.files); });
            dom.fileInput.addEventListener('change', e => { fileManager.add(e.target.files); dom.fileInput.value = ''; });
            dom.sendFilesBtn.addEventListener('click', () => fileManager.send());
            dom.clearFilesBtn.addEventListener('click', () => fileManager.clear());

            // Logs
            dom.downloadLogsBtn.addEventListener('click', () => logManager.download());
            dom.clearLogsBtn.addEventListener('click', () => logManager.clear());

            // Tabs
            dom.tabs.forEach(btn => {
                btn.addEventListener('click', () => {
                    dom.tabs.forEach(t => t.classList.remove('active'));
                    btn.classList.add('active');
                    dom.tabPages.forEach(p => { p.classList.remove('active'); if (p.id === btn.dataset.tab + 'Tab') p.classList.add('active'); });
                    if (btn.dataset.tab === 'embed') embedManager.updatePreview();
                });
            });

            // Mode Toggle
            dom.modeOpts.forEach(opt => {
                opt.addEventListener('click', () => {
                    opt.closest('.mode-toggle').querySelectorAll('.mode-opt').forEach(o => o.classList.remove('active'));
                    opt.classList.add('active');
                    state.sendMode = opt.dataset.mode;
                });
            });

            // Render
            webhookManager.render();
            linkManager.render();
            fileManager.render();
            helpers.renderLogs();
            historyManager.render();
            embedManager.renderTemplates();

            if (state.webhooks.length) { state.activeWebhook = state.webhooks[0]; webhookManager.render(); }
            else { helpers.toast('Ho≈ü geldiniz! Webhook ekleyerek ba≈ülayƒ±n.', 'info'); helpers.log('Uygulama ba≈ülatƒ±ldƒ±', 'info'); }
        }

        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>

</html>
